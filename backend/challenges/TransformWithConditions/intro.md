Transform the `value` column and consider the order. If the value is less than 3, use the previously valid value. If the first rows of the group start with values smaller than 3, use the average of the group.

<h3> Example Input</h3>
<h4> df</h4>
<div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }    .dataframe tbody tr th {        vertical-align: top;    }    .dataframe thead th {        text-align: left;    }</style><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>ID</th>      <th>group</th>      <th>value</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>1</td>      <td>A</td>      <td>4.0</td>    </tr>    <tr>      <th>1</th>      <td>2</td>      <td>A</td>      <td>6.0</td>    </tr>    <tr>      <th>2</th>      <td>3</td>      <td>A</td>      <td>2.0</td>    </tr>    <tr>      <th>3</th>      <td>4</td>      <td>A</td>      <td>9.0</td>    </tr>    <tr>      <th>4</th>      <td>5</td>      <td>A</td>      <td>7.0</td>    </tr>    <tr>      <th>5</th>      <td>6</td>      <td>A</td>      <td>5.0</td>    </tr>    <tr>      <th>6</th>      <td>7</td>      <td>A</td>      <td>1.0</td>    </tr>    <tr>      <th>7</th>      <td>8</td>      <td>A</td>      <td>9.0</td>    </tr>    <tr>      <th>8</th>      <td>9</td>      <td>A</td>      <td>8.0</td>    </tr>    <tr>      <th>9</th>      <td>10</td>      <td>A</td>      <td>9.0</td>    </tr>    <tr>      <th>10</th>      <td>11</td>      <td>B</td>      <td>NaN</td>    </tr>    <tr>      <th>11</th>      <td>12</td>      <td>B</td>      <td>4.0</td>    </tr>    <tr>      <th>12</th>      <td>13</td>      <td>B</td>      <td>5.0</td>    </tr>    <tr>      <th>13</th>      <td>14</td>      <td>B</td>      <td>6.0</td>    </tr>    <tr>      <th>14</th>      <td>15</td>      <td>B</td>      <td>1.0</td>    </tr>    <tr>      <th>15</th>      <td>16</td>      <td>B</td>      <td>2.0</td>    </tr>    <tr>      <th>16</th>      <td>17</td>      <td>B</td>      <td>3.0</td>    </tr>    <tr>      <th>17</th>      <td>18</td>      <td>B</td>      <td>4.0</td>    </tr>    <tr>      <th>18</th>      <td>19</td>      <td>B</td>      <td>2.0</td>    </tr>    <tr>      <th>19</th>      <td>20</td>      <td>B</td>      <td>6.0</td>    </tr>  </tbody></table></div>

<h3> Expected Output</h3>
<div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }    .dataframe tbody tr th {        vertical-align: top;    }    .dataframe thead th {        text-align: left;    }</style><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>ID</th>      <th>group</th>      <th>value</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>1</td>      <td>A</td>      <td>4.000000</td>    </tr>    <tr>      <th>1</th>      <td>2</td>      <td>A</td>      <td>6.000000</td>    </tr>    <tr>      <th>2</th>      <td>3</td>      <td>A</td>      <td>6.000000</td>    </tr>    <tr>      <th>3</th>      <td>4</td>      <td>A</td>      <td>9.000000</td>    </tr>    <tr>      <th>4</th>      <td>5</td>      <td>A</td>      <td>7.000000</td>    </tr>    <tr>      <th>5</th>      <td>6</td>      <td>A</td>      <td>5.000000</td>    </tr>    <tr>      <th>6</th>      <td>7</td>      <td>A</td>      <td>5.000000</td>    </tr>    <tr>      <th>7</th>      <td>8</td>      <td>A</td>      <td>9.000000</td>    </tr>    <tr>      <th>8</th>      <td>9</td>      <td>A</td>      <td>8.000000</td>    </tr>    <tr>      <th>9</th>      <td>10</td>      <td>A</td>      <td>9.000000</td>    </tr>    <tr>      <th>10</th>      <td>11</td>      <td>B</td>      <td>3.666667</td>    </tr>    <tr>      <th>11</th>      <td>12</td>      <td>B</td>      <td>4.000000</td>    </tr>    <tr>      <th>12</th>      <td>13</td>      <td>B</td>      <td>5.000000</td>    </tr>    <tr>      <th>13</th>      <td>14</td>      <td>B</td>      <td>6.000000</td>    </tr>    <tr>      <th>14</th>      <td>15</td>      <td>B</td>      <td>6.000000</td>    </tr>    <tr>      <th>15</th>      <td>16</td>      <td>B</td>      <td>6.000000</td>    </tr>    <tr>      <th>16</th>      <td>17</td>      <td>B</td>      <td>3.000000</td>    </tr>    <tr>      <th>17</th>      <td>18</td>      <td>B</td>      <td>4.000000</td>    </tr>    <tr>      <th>18</th>      <td>19</td>      <td>B</td>      <td>4.000000</td>    </tr>    <tr>      <th>19</th>      <td>20</td>      <td>B</td>      <td>6.000000</td>    </tr>  </tbody></table></div>