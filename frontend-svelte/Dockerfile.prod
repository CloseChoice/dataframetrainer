FROM nginx:alpine

# the public folder is built with `npm run build`. This step is executed in the pipeline
COPY ./public /usr/share/nginx/html

EXPOSE 80
# Copying the package files allows docker to cache node modules
# Installation will only run when dependencies changed
COPY package.json .
COPY package-lock.json .

COPY . .

RUN npm run build

CMD ["node", "build"]

# CMD ["npm","run", "dev", "--host"]